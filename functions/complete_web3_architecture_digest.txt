Overview of Web3 complete architecture:
The Web3 architecture consists of 5 layers: application, aggregation, execution, relay, and core. These layers form an onion structure with the core chain at the center. Each layer has its own responsibility and communicates with the neighboring layers. The application layer allows users and programs to interact with Web3, the aggregation layer aggregates data for optimized read and routing operations, the execution layer validates and executes Web3 operations, the relay layer synchronizes execution chains and ensures compliance with Web3 standards, and the core layer stores and synchronizes all relay chains. Decisions about Web3 are made by a decentralized public institution governed by collective intelligence technologies.
1) Application layer: The Application layer allows apps to send operations to alter the state of entities in Web3. It must have the ability to interact with any blockchain and define parameters of execution using a standard set by the public institution. The app operator signs the operations to take responsibility for not overloading the network and regulate the portal's throughput. The app user can define the max transaction fee, and make trade-offs between security, speed, and cost. An aggregation layer is needed to handle the read data model from the whole Web3 and to handle the routing of operations to the execution layer.
2) Aggregation Layer: The Aggregation Layer is responsible for aggregating data from all entities in web3 and producing a materialized view that is optimized for reading by applications connected to the layer. The layer also routes operations to the most optimal execution route. It allows deployment of event handlers to update read models, and the router uses the materialized view to determine the best execution route. The router considers the tradeoff parameters and finds the optimal route by preplaying the operation, checking which aggregate roots will be called. The router operator earns money by optimizing the execution, but also risks covering the difference if the execution price exceeds the max threshold. The aggregation cluster can also earn money by serving read requests from the application layer. The layer is based on CQRS + Event Sourcing design approach, a contribution by Greg Young.
3) Operational Layer: The Operational Layer, also known as L1, is where the operations of web3 are executed and where the domain logic is implemented. The web3 space is represented as a number of aggregates, each with its own event stream. Aggregates can be hosted by multiple operational chains and can be standardized by a web3 governance institution using a Web3 Domain Specific Language (DSL). The operational chains may have different implementations, prioritizing different trade-offs, creating a market for aggregate hosting. The synchronization between shards happens within one block and is orchestrated by relay chains connected to the operational chain.
4) Relay layer: The Relay layer acts as a communication bridge between multiple operational chains. It synchronizes the state of aggregates between all connected operational chains and allows cross-chain interaction. Relay chains transmit events from one operational chain to another and build a merkle root of all the aggregates they serve. They can decide which operational chains to connect to based on their capacity and competition from other relay chains. Operational chains can dynamically rebalance their set of aggregate roots through the relay chain and can cache the state of often-requested aggregates. Relay chains also route events to the corresponding subscribers and have a specified period of time to reach consensus on the state of all aggregate roots in web3 space, which is called an epoch and is established as a checkpoint for the final state. The synchronization of all relay chains happens through a core chain where they must be registered.
5) Core layer: The Core Chain is the final layer in the web3 architecture and acts as a central point for the regulation and standardization of the network. It only has one chain - the Core Chain - which is responsible for orchestrating all the relay chains and storing all the standards in the web3. It defines the standard implementation of aggregates business logic and stores the standards for the implementation of any aggregates, such as the default elliptic curve for encryption or the standard serialization format for omnichain operations. Validators in the Core Chain are elected via specialized institutions and do not need a token. The Core Chain is connected to all the relay chains, checks their formal technical requirements, and requires a security deposit to ensure proper synchronization. If a relay chain behaves maliciously, its security deposit can be slashed. The Core Chain is responsible for finalizing epochs from the relay layer and defining the consensus for synchronization of all the relay chains. Decentralization of power is achieved through the decentralization of power using properly designed institutions.
The Governance of the complete Web3 refers to the system of regulation and management of the network by a decentralized institution - the Collective Intelligence Council. The Council is made up of 3 chambers, each serving a different purpose in the decision-making process for regulations. The first chamber is composed of experts from various domains, the second chamber allows token holders to vote with their capital, and the third chamber is a direct or liquid democracy where anyone can participate in voting. Regulations must be approved by all three chambers to become a rule in web3. The Council is designed to be inclusive, with checks and balances, and to prioritize the benefit of humanity. The founding members of the Collective Intelligence Council form the first version of the governing institution for web3.